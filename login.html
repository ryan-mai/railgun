<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Railgun</title>
    <meta name="description" content="Hello, World! - A-Frame">
  <link rel="icon" type="image/x-icon" href="assets/images/railgun_logo.ico">

    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-troika-text/dist/aframe-troika-text.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/passwordGenerator.js"></script>
    <script src="js/anonGenerator.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/audioLogin.js"></script>
    <script src="js/keypress.js"></script>
  </head>
  <body>

    <script>
        console.log('[login] inline script executing');
        window.addEventListener('click', function () { console.log('[login] window click event'); }, { passive: true });

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const provider = new firebase.auth.GoogleAuthProvider();
        const auth = firebase.auth();
        auth.languageCode = 'it';

    </script>
    <a-scene user-audio-unlock>
      <a-assets>
        <a-asset-items>
            <a-asset-item id="futura" src="assets/fonts/futura_v2.ttf"></a-asset-item>
            <img id="reticle" src="assets/images/reticle.png">
            <img id="keycap" src="assets/images/keycap.png">
            <img id="login_bg" src="assets/images/user_login.png">
            <img id="backspace_bg" src="assets/images/backspace.png">
            <img id="submit_bg" src="assets/images/submit.png">
            <img id="google_bg" src="assets/images/google_login.png">
            <img id="skip_bg" src="assets/images/skip.png">
            <img id="login_info" src="assets/images/login_bg.png">
            <audio id="sao_op" src="assets/sounds/sao_op.mp3" preload="auto"></audio>
            <img id="tip" src="assets/images/Login.png">
        </a-asset-items>
      </a-assets>
      <a-entity sound="src: #sao_op; autoplay: true; loop: true; volume: 0.5; positional: false"></a-entity>
      <a-image src="#tip" width="13" height="1.75" position="-1 5.5 -6">
            <a-entity troika-text="value: Move your cursor to type letters, or to access Google Signup or Skip Login; color: white; anchor:left; fontSize:0.35" position="-6 0.3 0.01"></a-entity>
      </a-image>
      <a-image src="#login_info" width="8" height="1.25" position="0 6.75 -5">
            <a-entity troika-text="value: Account Setup ; color: white; fontSize:0.6" position="0 0.04 0.01"></a-entity>
      </a-image>

      <a-plane position="0 0.1 0">
        <a-image id="clickable-keyboard" src="#login_bg" width="8" height="1.5" position="-5 4 -5">
            <a-entity troika-text="value: Player: ; color: white; fontSize:0.6" position="-2.2 0.04 0.01"></a-entity>
            <a-plane position="1.2 0 0.01" width="4.5" height="0.75" color="#FFF"></a-plane>
            <a-entity id="userText" troika-text="value:; color: black; fontSize:0.5" position="-0.8 -0.03 0.1"></a-entity>
            <a-entity troika-text="value: 13 Letters Only!; color: red; fontSize:0.25" position="2.75 -0.6 0.1"></a-entity>
        </a-image>

    <a-image id="userAuth"  src="#submit_bg" class="userAuth clickable-auth" width="4" height="1.5" user-auth position="3 4 -5" scale="-1 1 1">
            <a-entity troika-text="value: Submit; color: white; fontSize:0.5" position="0.1 -0.01 0.01" scale="-1 1 1"></a-entity>
        </a-image>
    <a-image id="googleAuth" src="#google_bg" class="googleAuth clickable-auth" width="1.5" height="1.5" google-auth position="0 4 -5">
        </a-image>
    <a-image id="anonAuth" src="#skip_bg" class="anonAuth clickable-auth" width="3.5" height="1.5" anon-auth position="7 4.1 -5">
            <a-entity troika-text="value: Skip Login; color: white; fontSize:0.3; anchor: left" position="-1.5 -0.1 0.01"></a-entity>  
        </a-image>      
        <a-plane id="keyboard">
        <a-image src="#keycap" class="clickable-key" clickable-key position="-6 2 -5">
            <a-entity troika-text="value: Q; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-4.75 2 -5">
            <a-entity troika-text="value: W; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-3.5 2 -5">
            <a-entity troika-text="value: E; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-2.25 2 -5">
            <a-entity troika-text="value: R; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-1 2 -5">
            <a-entity troika-text="value: T; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="0.25 2 -5">
            <a-entity troika-text="value: Y; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="1.5 2 -5">
            <a-entity troika-text="value: U; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="2.75 2 -5">
            <a-entity troika-text="value: I; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="4 2 -5">
            <a-entity troika-text="value: O; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="5.25 2 -5">
            <a-entity troika-text="value: P; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-5.33 0.5 -5">
            <a-entity troika-text="value: A; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-4.08 0.5 -5">
            <a-entity troika-text="value: S; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-2.83 0.5 -5">
            <a-entity troika-text="value: D; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-1.58 0.5 -5">
            <a-entity troika-text="value: F; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-0.33 0.5 -5">
            <a-entity troika-text="value: G; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="0.92 0.5 -5">
            <a-entity troika-text="value: H; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="2.17 0.5 -5">
            <a-entity troika-text="value: J; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="3.42 0.5 -5">
            <a-entity troika-text="value: K; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="4.67 0.5 -5">
            <a-entity troika-text="value: L; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-4.05 -1 -5">
            <a-entity troika-text="value: Z; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-2.8 -1 -5">
            <a-entity troika-text="value: X; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-1.55 -1 -5">
            <a-entity troika-text="value: C; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="-0.3 -1 -5">
            <a-entity troika-text="value: V; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="0.95 -1 -5">
            <a-entity troika-text="value: B; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="2.2 -1 -5">
            <a-entity troika-text="value: N; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#keycap" class="clickable-key" clickable-key position="3.45 -1 -5">
            <a-entity troika-text="value: M; color: white; fontSize:0.75" position="0.03 0.06 0.01"></a-entity>
        </a-image>
        <a-image src="#backspace_bg" class="clickable-key" width="4" height="4" clickable-key position="6.5 0.5 -5">
            <a-entity troika-text="value: Backspace; color: white; fontSize:0.5" position="0.5 -0.1 0.01"></a-entity>
        </a-image>
        <a-image src="#backspace_bg" class="clickable-key" width="4" height="4" clickable-key position="-7.15 0.5 -5" scale="-1 1 1">
            <a-entity troika-text="value: Backspace; color: white; fontSize:0.5" position="0.5 -0.1 0.01" scale="-1 1 1"></a-entity>
        </a-image>
        </a-plane>
        </a-plane>
        <a-sky color="#000"></a-sky>
        <a-entity id="player"
            position-reader
            nipple-controls="mode: static">
        <a-entity
            camera
            position="0 3 2"
            look-controls>
            <a-entity
              id="ray"
              cursor="fuse: true;"
              raycaster="showLine: true; far: 50; lineColor: red; interval: 500; objects: .clickable-key, .clickable-auth"
              material="color: red; shader: flat"
              position="0 0 0"
              rotation="0 0 0">

              <a-image id="ret" src="#reticle"
                      position="0 0 -10"
                      width="2.5"
                      height="2.5"
                      rotation="0 0 0"
                      material="src: #reticle; transparent: true; alphaTest: 0.01; depthTest: false;">
              </a-image>
            </a-entity>
          </a-entity>
        </a-entity>
    </a-scene>
  </body>
</html>